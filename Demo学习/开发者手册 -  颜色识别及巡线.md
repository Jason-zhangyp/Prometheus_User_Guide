# 颜色识别及巡线

本教程的目的：
- 理解颜色识别程序背后的原理
- 掌握颜色识别程序，并能够进行二次开发
- 掌握巡线程序，并能够进行二次开发

## 识别算法介绍



## 巡线算法介绍

**color_line_following.cpp** 
- 订阅线条识别结果，即在相机视野中的夹角
 	
		ros::Subscriber vision_sub = nh.subscribe<std_msgs::Float32>("/prometheus/vision/color_line_angle", 10, vision_cb);
- 发布上层控制指令

		ros::Publisher command_pub = nh.advertise<prometheus_msgs::ControlCommand>("/prometheus/control_command", 10);
- 控制策略说明
	- 高度不变，与起飞高度平齐
	- xy方向采用机体系xy速度控制，可通过参数设置x轴前进速度，y轴速度根据与线偏差量计算得到
	- 偏航角根据线在视场中的斜率计算得到，同样是采用机体系增量式控制


## 仿真流程
- 运行启动脚本（注意选择颜色及其他相关参数设置）
    	roslaunch prometheus_gazebo sitl_color_line_following.launch
   [![G2OMqJ.md.png](https://s1.ax1x.com/2020/04/08/G2OMqJ.md.png)](https://imgchr.com/i/G2OMqJ)
- 输入1，飞机将起飞至预设点，可在终端中查看相关信息
	[![G2OKr4.md.png](https://s1.ax1x.com/2020/04/08/G2OKr4.md.png)](https://imgchr.com/i/G2OKr4)
- 等待一段时间后，飞机将执行巡线任务
	[![G2OlZ9.md.png](https://s1.ax1x.com/2020/04/08/G2OlZ9.md.png)](https://imgchr.com/i/G2OlZ9)

## 如何进行真机实验？  

待补充  
